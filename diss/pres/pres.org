#+TITLE:     An Agent-Based Modeling Framework and Application for the Generic Nuclear Fuel Cycle
#+AUTHOR:    Matthew J. Gidden
#+EMAIL:     matthew.gidden@gmail.com
#+DATE:      03.26.2015
#+STARTUP: beamer
#+DESCRIPTION: 
#+KEYWORDS: 
#+LANGUAGE:  en
#+OPTIONS:   H:3 toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+LINK_UP:
#+LINK_HOME:

#+LaTeX_CLASS: beamer
#+LaTeX_CLASS_OPTIONS: [10pt]
#+LATEX_HEADER: \usepackage{listings}
#+LATEX_HEADER: \usepackage[ruled,vlined]{algorithm2e} % for algorithms

#+BEAMER_THEME: Wisconsin [white,pdflogo]
#+BEAMER_HEADER: \setbeamertemplate{bibliography item}[text]
#+BEAMER_HEADER: \AtBeginSection[]{\begin{frame}[noframenumbering,plain]{Outline}\tableofcontents[currentsection]\end{frame}}

#+COMMENT: This is required because org-mode does not support short titles, etc.
#+BEAMER_HEADER: \title[Thesis Defense]{An Agent-Based Modeling Framework and Application for the Generic Nuclear Fuel Cycle}
#+BEAMER_HEADER: \author[M. J. Gidden]{Matthew J. Gidden}
#+BEAMER_HEADER: \institute[UW-Madison]{University of Wisconsin-Madison}
#+BEAMER_HEADER: \date[03.26.2015]{March 26, 2015}

#+COMMENT: This is required because org-mode does not support frame options in their TOC 
*** Outline
  :PROPERTIES:
  :BEAMER_opt: plain, noframenumbering
  :END:
#+TOC: headlines 1

* Introduction
** How It Works
   
*** What's the Point?

- $P \propto \Sigma_f \Phi V_{\text{core}}$

- $$

- National energy policy

- Waste management

- Proliferation

*** Fission Power
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/xs.pdf]]

*** The Nuclear Fuel Cycle
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/fc.pdf]]

*** The Nuclear Fuel Cycle
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/fc-front.pdf]]

*** The Nuclear Fuel Cycle
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/fc-back.pdf]]

*** The Nuclear Fuel Cycle
  Used fuel exiting light water reactors has the following average elemental
  breakdown:


#+caption: Elemental Breakdown of Spent Fuel Exiting a Typical LWR
#+attr_latex: :align |c|c|
|------------------+---------|
| Element Group    | wt %    |
|------------------+---------|
| Uranium          | \sim 95 |
| Plutonium        | \sim1   |
| Minor Actinides  | \sim0.1 |
| Fission Products | \sim4   |
|------------------+---------|

** Fuel Cycle Simulation
*** Simulation
It's hard.

- resource fungibility
- recycling
- constrained supply
- /in situ/, /ex situ/
  - physics
  - economics
  - /et cetera/
- arbitrary numbers, types of facilities
- geo-political effects
- "inifite" possible fuel cycles
- an "art" and a science

*** "Old School"
- no physics or "too much" physics
- fleets of facilities
- aggregate material flows
- hard-coded connections between facility types
- little or no /in situ/ decision making
- no regional information
- no idle facilities

*** Motivation
#+begin_quote
Let's add a statement, eh?
#+end_quote

* Strategy and Methods

** New Tools
*** Entity Interaction

**** Agent-Based Modeling (ABM)
- agents interact with an environment
- facility agents manage inventory
- institution agents can build facility agents
- region agents inform system demand for facility types 

#+BEAMER: \pause

**** Supply-Chain Management (SCM)
- couples with ABM \cite{julka}
- facilities inform the system of resource-specific supply and demand
- institutions and regions can perturb resource flows
- institutions can plan deployment
- regions can impose geo-political models

*** Transportation Problem
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/xportation.pdf]]

*** Transportation Problem
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/xportation-labeled.pdf]]

*** Transportation Problem    
#+begin_latex
\begin{subequations}\label{eqs:xport}
  \begin{align}
    %%
    \min_{x} \:\: & 
    \sum_{(i, j) \in A} c_{i,j} x_{i,j}
    & \label{eqs:xport_obj} \\
    %%
    \text{s.t.} \:\: &
    \sum_{j \in N_2} x_{i,j} \leq s_i
    & \forall i \in N_1  \\
    %%
    &
    \sum_{i \in N_1} x_{i,j} \geq d_j
    & \forall j \in N_2  \\
    %%
    &
    x_{i,j} \geq 0
    & \forall (i, j) \in A \label{eqs:xport_x}
    %%
  \end{align}
\end{subequations}
#+end_latex

** Dynamic Resource Exchange (DRE)

*** Dynamic Resource Exchange (DRE) Goals
- complex definitions of resource quality (e.g., arbitrary isotopic vectors)
- communication between suppliers and consumers
- constrained supply
- fungible demand
- arbitrary numbers and types of facilities
- enable geopolitical models

*** DRE Phases & Layers
**** Phases
:PROPERTIES:
:BEAMER_col: 0.5
:BEAMER_env: block
:END:
1. Information Gathering
  - Request for Bids (RFB)
  - Response to Request for Bids (RRFB)
  - Preference Adjustment (PA)
2. Solution
3. Trade Execution
   
**** Layers
:PROPERTIES:
:BEAMER_col: 0.4
:BEAMER_env: block
:END:
- Resource Layer
- Exchange Layer
- Formulation Layer
  
*** DRE Phases & Layers
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/exchange_xlation.pdf]]

*** Information Gathering Phase
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/info.pdf]]

*** Information Gathering Phase Terminology
- Bids and Requests
  - Mutual
  - Exclusive
  - Mutually Exclusive
- Portfolios
- Constraint Values
- Coefficient Conversion Functions
- Preferences

*** Translation to Exchange Layer
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/exchange_bare_words.pdf]]

*** Translation to Exchange Layer
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/exchange_groups.pdf]]

*** Solution in Exchange Layer
#+begin_latex
  \begin{algorithm}[H]
    \SetAlgoLined
    order request portfolios by average preference\;
    \ForAll{request portfolios} {
      order requests by average preference\;
      matched $\leftarrow$ 0\;        
      \While{matched $\leq q_{J}$ and $\exists$ a request} {
        get next request\;
        order arcs by preference\;
        \While{matched $\leq q_{J}$ and $\exists$ an arc} {
          get next arc\;
          remaining $\leftarrow q_{J}$ - matched\;
          to\_match $\leftarrow \min \lbrace$remaining, Capacity(arc)$\rbrace$\;
          matched $\leftarrow$ matched + to\_match\;
        }
      }
    }
    \caption{Greedy Exchange Execution} 
  \end{algorithm}
#+end_latex

*** Translation to Formulation Layer
**** text
:PROPERTIES:
:BEAMER_col: 0.3
:END:
- Cost translation function $f : p_{i,j} \to c_{i,j}$
- $f(x) = \frac{1}{x}$

**** fig
:PROPERTIES:
:BEAMER_col: 0.7
:END:
#+caption: A Fig \cite{hamilton_blue_2012}
#+attr_latex: :height 5cm
[[file:figs/exchange_false.pdf]]

*** Nuclear Fuel Cycle Transportation Problem (NFCTP)
#+begin_latex
\begin{subequations}\label{eqs:NFCTP-LP}
  \begin{align}
    %%
    \min_{x} \:\: 
    & 
    z = \sum_{i \in I}\sum_{j \in J}c_{i,j} x_{i,j} 
    & 
    \label{eqs:NFCTP-LP_obj} \\
    %%
    \text{s.t.} \:\: 
    &
    \sum_{i \in I_s} \sum_{j \in J} a^k_{i,j} x_{i,j} \leq b^k_s 
    &
    \: 
    \forall \: k \in K_s, 
    \forall \: s \in S 
    \label{eqs:NFCTP-LP_sup} \\
    %%
    &
    \sum_{j \in J_r} \sum_{i \in I} a^k_{i,j} x_{i,j} \geq b^k_r 
    &
    \: 
    \forall \: k \in K_r,  
    \forall \: r \in R 
    \label{eqs:NFCTP-LP_req} \\
    %%
    &
    x_{i,j} \in [0, \tilde{x_j}]
    &
    \forall \: i \in I, 
    \forall \: j \in J 
    \label{eqs:NFCTP-LP_x}
    %%
  \end{align}
\end{subequations}
#+end_latex

*** Nuclear Fuel Cycle Transportation Problem (NFCTP)
#+begin_latex
\begin{subequations}\label{eqs:NFCTP}
  \begin{align}
    %%
    \min_{x, y} \:\: 
    & 
    z \:\: = 
    \sum_{(i, j) \in A_p} c_{i,j} x_{i,j} 
    \: + 
    \sum_{(i, j) \in A_e} c_{i,j} \tilde{x_j} y_{i,j} 
    & 
    \label{eqs:NFCTP_obj} \\
    %%
    \text{s.t.} \:\: 
    &
    \sum_{(i, j) \in A_{p_s}} a^k_{i,j} x_{i,j}
    \: + 
    \sum_{(i, j) \in A_{e_s}} a^k_{i,j} \tilde{x_j} y_{i,j}
    \leq b^k_s 
    &
    \: 
    \forall \: k \in K_s, 
    \forall \: s \in S 
    \label{eqs:NFCTP_sup} \\
    %%
    &
    \sum_{(i, j) \in M_{s}} y_{i,j} \leq 1 
    &
    \forall \: s \in S 
    \label{eqs:NFCTP_mut_sup} \\
    %%
    &
    \sum_{(i, j) \in A_{p_r}} a^k_{i,j} x_{i,j}
    \: + 
    \sum_{(i, j) \in A_{e_r}} a^k_{i,j} \tilde{x_j} y_{i,j}
    \geq b^k_r 
    &
    \: 
    \forall \: k \in K_r,  
    \forall \: r \in R 
    \label{eqs:NFCTP_req} \\
    %%
    &
    \sum_{(i, j) \in M_{r}} y_{i,j} \leq 1 
    &
    \forall \: r \in R 
    \label{eqs:NFCTP_mut_req} \\
    %%
    &
    x_{i,j} \in [0, \tilde{x_j}]
    &
    \forall \: (i, j) \in A_p
    \label{eqs:NFCTP_x} \\
    %%
    &
    y_{i,j} \in \left\{ 0, 1 \right\}
    &
    \forall \: (i, j) \in A_e
    \label{eqs:NFCTP_y}
    %%
  \end{align}
\end{subequations}
#+end_latex

* Experimentation and Results
** Strategy

*** Strategy

Explore DRE performance & behavior in a realistic setting

- Generate front and back-end exchanges

- Test problem-size scaling

- Test sensitivity to instance stochasticity

- Investigate formulation effects

  - Preference and cost

  - False arc cost

** Generating Exchanges
*** Overview

- Two types: Front-end and Back-end

- Process:
  - Read parameter vector
  - Instantiate entity surrogates
  - Simulate Information Gathering Phase
  - Translate to Resource Layer
  - Solve

*** Splitting Exchanges
**** text
:PROPERTIES:
:BEAMER_col: 0.3
:END:
Occurs when
- Reactors directly connected to other reactors
- Reactors and repositories compete for resources



**** fig
:PROPERTIES:
:BEAMER_col: 0.7
:END:
#+caption: A separable Exchange Graph with nodes grouped by portfolio and the separating partition shown as a red dashed line.
#+attr_latex: :height 5cm
[[file:figs/exchange_part_port.pdf]]
    
*** Fuel Cycles (\(f_\text{fc}\))
**** Once-through
- Commodities: UOX
- Reactor Types: Thermal
#+beamer: \pause
**** MOX Thermal/Fast
- Commodities: UOX, Thermal MOX, Fast MOX
- Reactor Types: Thermal, MOX-based Fast
#+beamer: \pause
**** MOX/ThOX Thermal/Fast
- Commodities: UOX, Thermal MOX, Fast MOX, ThOX
- Reactor Types: Thermal, MOX-based Fast, ThOX-based Fast

*** Reactors 
:PROPERTIES:
:BEAMER_col: 0.4
:END:
Modeled as either Thermal (AP-1000) or Fast reactors

Reactor type determines 
- core volume
- consumable commodities
- preferred enrichment range
- number of assemblies per batch (39 vs. 92)

**** Fidelity (\(f_\text{rx}\))
- Single batch
- $N_a$ assemblies

*** Location Effects 
#+begin_latex
\begin{equation}\label{eqn:loc_proxy}
p_{l}(i, j) = \delta_{\text{reg}} 
\frac{\exp(- \lvert \text{reg}_{i} - \text{reg}_{j} \rvert ) + \delta_{\text{loc}}
  \exp(- \lvert \text{loc}_{i} - \text{loc}_{j} \rvert )}
     {1 + \delta_{\text{loc}}}
\end{equation}
#+end_latex
#+beamer: \vspace{0.2cm}
**** Fidelity (\(f_\text{loc}\))
- None (\(\delta_{\text{reg}} = 0, \delta_{\text{loc}} = 0\)) 
- Regional (\(\delta_{\text{reg}} = 1, \delta_{\text{loc}} = 0\))
- Regional + Distance (\(\delta_{\text{reg}} = 1, \delta_{\text{loc}} = 1\))

*** Information Gathering Simulation
**** Requests/Bids
Front-end: Reactors make $N$ requests per commodity
Back-end: Reactors make $N$ bids to each supporting facility 
**** Portfolio Constraints
Support facilities have process and inventory constraints, function of resource *quality* (enrichment)
Reactors have mass-based, mutually-exclusive constraints.
**** Preferences
Based on facility type, commodity type, and facility location.

*** Example
**** text
:PROPERTIES:
:BEAMER_col: 0.4
:END:
A front-end MOX fuel cycle with one entity of each type:
- thermal reactor
- fast reactor
- UOX supplier
- thermal-spec MOX supplier
- fast-spec MOX supplier
**** fig
:PROPERTIES:
:BEAMER_col: 0.5
:END:
#+attr_latex: :height 5cm
[[file:figs/gen_ex.pdf]]

** Scaling Behavior

*** topic
    stuff

** Stochastic Behavior

*** topic
    stuff

* Conclusions

** New Capabilities

*** Who Cares?
    stuff

** Reccomendations

*** info
    stuff

** Future Work

*** info
    stuff

** Acknowledgements

*** Acks
    stuff

*** References
  :PROPERTIES:
  :BEAMER_opt: allowframebreaks, plain, noframenumbering
  :END:
   \bibliographystyle{plain}
   \bibliography{pres}
